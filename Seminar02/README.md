# Контейнеризация (семинар 02)
Создание и запуск контейнера, с использованием механизма LXC.
## LXC
В системе работаем под правами `root`.
Устанавливаем пакет LXC:

`apt install lxd-installer`

`apt install lxc-utils`

## Создание и запуск контейнера
Создаем контейнер:

`lxc-create -n test123 -t ubuntu`

Запускаем контейнер:

`lxc-start -n test123`

Останавливаем контейнер:

`lxc-stop -n test123`

## Ограничение памяти и автозапуск контейнера
Для настройки контейнера редактируем `/var/lib/lxc/test123/config`, добавляя в него строки:

`lxc.cgroup2.memory.max = 256M`

`lxc.start.auto = 1`

![Скриншот по теме контейнеризация. Редактирование файла /var/lib/lxc/test123/config](./img/VirtualBox_Linux_19_08_2023_12_37_06.png)

После перезагрузки (работаем по-прежнему под правами `root`) убеждаемся в автостарте контейнера.

![Скриншот по теме контейнеризация. Автостарт контейнера после перезагрузки системы](./img/VirtualBox_Linux_19_08_2023_12_45_58.png)

Подключаемся к контейнеру командой 

`lxc-attach -n test123`

Выводим объем доступной для контейнера памяти:

`free -m`

![Скриншот по теме контейнеризация. Автостарт контейнера после перезагрузки системы](./img/VirtualBox_Linux_19_08_2023_12_50_24.png)

## Логи
Для ведения логов — останавливаем контейнер, и перезапускаем его командой:

`lxc-start -d -n test123 -l debug -o test.log`

Далее, по команде

`cat test.log`

получаем «простыню» логов для последующего анализа.

![Скриншот по теме контейнеризация. Автостарт контейнера после перезагрузки системы](./img/VirtualBox_Linux_19_08_2023_13_13_17.png)